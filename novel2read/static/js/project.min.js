!function(){let t=$("[name=csrfmiddlewaretoken]").val(),e=t||function(t){var e=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),a=0;a<o.length;a++){var n=jQuery.trim(o[a]);if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}("csrftoken");function o(t="",e="info"){document.body;let o=document.getElementsByClassName("container")[1],a=document.createElement("div");a.className=`alert alert-${e} alert-animate`,a.textContent=t,o.appendChild(a),setTimeout(()=>{o.removeChild(a)},3e3)}$.ajaxSetup({beforeSend:function(t,o){var a;a=o.type,/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)||this.crossDomain||(t.setRequestHeader("X-CSRFToken",e),console.log(e))}}),$(".js-vote-btn").click(function(){!function(t){$.ajax({url:t.attr("data-vote-url"),type:"post",dataType:"json",success:function(t){t.is_valid?($(".js-bvotes").html(t.book_votes),$(".js-uvotes").html(t.user_votes),o("Successfuly voted.")):o(t.info_msg,"warning")},error:function(t,e,a){o(`${t.status} ${t.statusText}`,"danger")}})}($(this))}),$(".js-lib-btn").click(function(){!function(t){let e={lib_in:t.attr("data-lib-in")};$.ajax({url:t.attr("data-lib-url"),type:"post",dataType:"json",data:e,success:function(e){e.is_valid?e.in_lib?(t[0].hasAttribute("data-bookmark")?t.html('<i class="far fa-bookmark"></i>'):t.html("Add to Library"),t.attr("data-lib-in",0),o("Book removed from Library.")):(t[0].hasAttribute("data-bookmark")?t.html('<i class="fas fa-bookmark"></i>'):t.html('<i class="fas fa-check"></i> In Library'),t.attr("data-lib-in",1),o("Book added to Library.")):o(e.info_msg,"warning")},error:function(t,e,a){o(`${t.status} ${t.statusText}`,"danger")}})}($(this))}),$("#search-form").on("submit",function(t){t.preventDefault(),function(t){$.ajax({url:t.attr("action"),type:"post",dataType:"json",data:{search_field:$("#id_search_field").val()},success:function(t){console.log(t),$(".booksearch__formresult").html(t.html_search_form_result)},error:function(t,e,a){o(`${t.status} ${t.statusText}`,"danger")}})}($(this))});let a=(window.innerWidth,"auto"),n=window.innerWidth>2e3?280:550;new Swiper(".swiper-container",{pagination:".swiper-pagination",effect:"coverflow",centeredSlides:!0,loop:!0,slidesPerView:a,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",coverflow:{rotate:0,stretch:0,depth:n,modifier:1,slideShadows:!1},slideToClickedSlide:!0})}();